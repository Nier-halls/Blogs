# HTTPS 数字证书 数字签名 非对称加密
## 提纲
> * 数字签名
> * 数字证书
> * 加密

## 非对称加密
### 解决问题
1. 数据安全：确保公钥持有方向私钥持有方发送的**数据安全**
2. 身份认证：公钥持有方对私钥持有方的**身份认证**

注：**不能保证**私钥持有方向公钥持有方发送数据的安全性

### 使用
1. 发送者对数据用私钥加密
2. 接受者对数据用公钥解密


## 数字签名
### 解决的问题
确保传输过程中**数据完整性**

### 使用
1. 发送者对传递数据进行摘要算法生成摘要信息
2. 发送者用自己的私钥加密摘要信息产生数字签名
3. 接受者用公钥对签名解密，
4. 接受者对收到的数据进行相同的摘要算法获得摘要信息，
5. 接受者对比解密后的摘要和计算得到的摘要是否一致
6. 如果一致说明内容未被篡改，否则则有篡改


## 数字证书
### 解决问题
确保Server公钥能够正确的交到Client的手中，保证Server公钥以及相关数据**完整性**且**不被替换**

### 数字证书和数字签名的关系
* 数字证书包含数字签名
* 数字签名由数字证书对应的私钥进行加密摘要信息生成
* 数字证书中包含Server的公钥
* 数字证书由CA权威机构颁发给Server

### 使用
1. CA将Server的公钥以及信息进行摘要算法生成摘要信息
2. CA用自己的私钥对摘要信息进行加密，生成数字签名
3. CA将签名好的数字证书颁发给Server
4. Server通讯时将数字证书发送给Client
5. Client用CA根证书解密数字签名获取摘要，成功说明**证书来自CA**没有被替换过
6. Client用相同的算法对证书内容计算获得摘要
7. Clinet对比解密后的摘要和计算获得的摘要，相同说明**证书完整**未被篡改
8. Client成功从Server发送的数字证书中获取到Server的公钥



## HTTPS确保数据安全性
### 流程
1. Server向CA申请一个数字证书，并提交自己的公钥ServerPubKey以及相关的信息（如域名有效期等）
2. CA根据Server提交的公钥以及相关信息生成证书，并且对证书内容进行摘要算法生成摘要信息
3. CA用自己的私钥CAPriKey对Server摘要信息进行加密生成数字签名并且附加在数字证书的后面
4. CA将签名好的数字证书颁发给Server，Server在收到请求时返回数字证书
5. Client用CAPubKey对数字签名解密获得解密的摘要信息（非对称加密，确认证书颁发者身份，确保由CA颁发且未被替换）
6. Client用摘要算法获得计算的摘要信息
7. Client对比解密的摘要信息和计算的摘要信息是否一致（数字签名，确保证书信息完整未被篡改）
8. Client用证书中携带的ServerPubKey对请求信息加密（非对称加密，确保Client向Server发送的数据安全性）
9. Server和Client协商生成对称密钥
10. Server和Client请求全部进行对称加密解密（对称密钥，确保Server返回给Client的数据安全性）

### 用到的技术
#### 1.非对称加密
* 确认Server证书颁发者身份，确保由CA颁发且未被替换
* 确保Client向Server发送的数据安全性，Server向Client发送数据因公钥是公开的因此谁都可以解密获得

#### 2.数字签名
* 确保Server证书信息的完整性
* 配合非对称加密技术确认Server身份（因Server证书由CA颁发，Server证书信息是完整未被篡改所以Server身份是权威机构CA承认的）

#### 3.对称加密
通讯过程中实时生成，确保Server向Client发送数据的安全性；


